In the two stage diff-amp designed in part 3, use two different CMFB loop with CMFB error amplifiers (use current mirror load).  Keep the W/L ratios and bias currents same as in assignment-3. Use a load capacitor of 5pF for the differential output.

Analyze the stability of the two loops by checking the phase margin. Add appropriate values of compensation capacitors in the two loops, to obtain sufficient phase margin.

Ensure that the bandwidth for the differential operation is at least 5KHz.
For differential operation.

Note: for common-mode analysis you need to set the differential input to
zero. The for DC biasing of input nodes you can use large ideal feedback resistors. Ensure appropriate DC bias while opening the CMFB loop. The input DC point of the error amplifier should remain same and you need to use ideal DC source to do this.
